/*--------------------------------------------------
* jQuery pagination plugin v1.1
* 作者: 徐俊洲
* QQ: 765550360
* 日期: 2016-09
* 说明: 该插件任何人可以应用于任何项目, 完全免费开放自由.
---------------------------------------------------*/
!function (a) { var d = function (b, c) { var e = this, f = "[xjzPagination.js]: "; void 0 !== c.totalPages && null !== c.totalPages && (isNaN(c.totalPages) || 0 == c.totalPages) && a.error(f + "静态分页配置项totalPages, 必须为数字且不能为0"), void 0 !== c.visiblePages && (isNaN(c.visiblePages) || c.visiblePages < 1) && a.error(f + "可视页面数visiblePages, 必须为数字且要大于0"), void 0 !== c.startPage && (isNaN(c.startPage) || c.startPage < 1) && a.error(f + "起始页面startPage, 必须为数字且要大于0"), "function" != typeof c.onPageClick && a.error(f + "请添加页面点击回调函数, onPageClick"), e.options = a.extend({}, d.default, c), e.$element = b, e.totalPages = 0, e.currentPage = -1, e.bindEvent(), e.options.totalPages && (e.currentPage = e.options.startPage, e.totalPages = e.options.totalPages), e.createPages(), e.options.initiateStartPageClick && (e.currentPage = e.options.startPage, e.options.onPageClick.call(e.$element, e.options.startPage)) }; d.default = { totalPages: null, visiblePages: 7, startPage: 1, initiateStartPageClick: !0, pagingType: "simple_numbers", ellipsis: !0, onPageClick: a.noop, first: "首页", prev: "上一页", next: "下一页", last: "尾页", more: "...", nextClass: "next", prevClass: "prev", lastClass: "last", firstClass: "first", pageClass: "page", moreClass: "more", activeClass: "active", disabledClass: "disabled" }, d.prototype = { test: function () { alert("test") }, createPages: function () { var b = this, c = a("<div></div>"), d = ["first", "prev", "next", "last"], e = b.options, f = this.getPages(); a.each(d, function (d, e) { 2 == d && a.each(f, function (a, d) { c.append(b.createDom(d, b.currentPage)) }), c.append(b.createDom(e)) }), b.currentPage < 2 && c.find("." + e.firstClass + ",." + e.prevClass).addClass(e.disabledClass), b.currentPage >= b.totalPages && c.find("." + e.nextClass + ",." + e.lastClass).addClass(e.disabledClass), b.$element.empty().append(c.children()), this.pagingType() }, getPages: function () { var i, a = this, b = Math.min(a.options.visiblePages, a.totalPages), c = a.totalPages, d = a.currentPage, e = Math.floor(b / 2), f = 0, g = 0, h = []; if (0 == c) return h; for (f = d - e + 1 - b % 2, g = d + e, 0 >= f && (f = 1, g = b), g > c && (f = c - b + 1, g = c), i = f; g >= i; i++) h.push(i); return a.options.ellipsis && b >= 7 && c > b && (1 == h[0] ? (h[h.length - 1] = c, h[h.length - 2] = "more") : h[h.length - 1] == c ? (h[0] = 1, h[1] = "more") : (h[0] = 1, h[1] = "more", h[h.length - 1] = c, h[h.length - 2] = "more")), h }, createDom: function (b, c) { var d = this.options, e = a("<li></li>"), f = a('<a href="javacript:;"></a>'); return isNaN(b) ? (e.addClass(d[b + "Class"]), f.text(d[b])) : (b == c && e.addClass(d.activeClass), e.addClass(d.pageClass), f.text(b)), e.append(f) }, pagingType: function () { var a = this.options, b = a.pagingType, c = this.$element; switch (b) { case "full_numbers": break; case "simple_numbers": c.find("." + a.firstClass + ",." + a.lastClass).remove(); break; case "full": c.find("." + a.pageClass + ",." + a.moreClass).remove(); break; case "simple": c.find("." + a.firstClass + ",." + a.lastClass + ",." + a.pageClass + ",." + a.moreClass).remove(); break; case "numbers": c.find("." + a.firstClass + ",." + a.lastClass + ",." + a.prevClass + ",." + a.nextClass).remove() } }, update: function (a, b) { var c = this; c.totalPages == a && 0 != a || null !== c.options.totalPages || (c.totalPages = a, b && (c.currentPage = b), c.totalPages < c.currentPage && (c.currentPage = 0 == c.totalPages ? -1 : c.totalPages + 1), this.createPages()) }, bindEvent: function () { var b = this, c = b.options; b.$element.on("click", "li", function () { var e = a(this), f = e.text(); if (e.hasClass(c.disabledClass) || b.currentPage == f) return !1; switch (!0) { case e.hasClass(c.firstClass): f = 1; break; case e.hasClass(c.prevClass): f = b.currentPage - 1; break; case e.hasClass(c.pageClass): f = e.text(); break; case e.hasClass(c.nextClass): f = b.currentPage < 1 ? 1 : b.currentPage + 1; break; case e.hasClass(c.lastClass): f = 0 == b.totalPages ? 1 : b.totalPages; break; case e.hasClass(c.moreClass): f = e.next().text() == b.totalPages ? Number(e.prev().text()) + 1 : Number(e.next().text()) - 1 } return b.currentPage = +f, b.createPages(), b.options.onPageClick.call(b.$element, +f), !1 }) } }, a.fn.extend({ xjzPagination: function (a) { if (this.data("xjzPagination")) return this; var b = new d(this, a); return this.data("xjzPagination", b), b } }) }(window.jQuery, window, document);